<html>
<head>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <style>
        h1, h2, h3 { font-family: 'Raleway', sans-serif; }
        body { width: 500px; display: block; margin: auto; text-align: center; }
        .pure-control-group label { width: 200px; }
        .pure-control-group select { width: 100px; }
    </style>
</head>
<body>

    <header>
        <h1>Shares Generator {{country}}</h1>
        <h3>Generator status: derp</h3>
        <h4> Click <a href="{{killPage}}">here</a> to kill</h4>
    </header>

    <div class="content">
        <form class="pure-form pure-form-aligned" action="{{generateAction}}" method="post">
            <fieldset>
                <div class="pure-control-group">
                    <label for="duration">Duration in minutes</label>
                    <select id="duration" name="duration">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>

                <div class="pure-control-group">
                    <label for="updatesPerSec">Generate per second</label>
                    <select id="updatesPerSec" name="updatesPerSec">
                        <option value="1" selected>1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="30">30</option>
                        <option value="40">40</option>
                        <option value="50">50</option>
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="300">300</option>
                        <option value="400">400</option>
                        <option value="500">500</option>
                        <option value="1000">1000</option>
                        <option value="1500">1500</option>
                        <option value="2000">2000</option>
                        <option value="2500">2500</option>
                        <option value="5000">5000</option>
                    </select>
                </div>

                <div class="pure-control-group">
                    <label for="concurrentThreads">Concurrent Threads</label>
                    <select id="concurrentThreads" name="concurrentThreads" disabled>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="5">5</option>
                        <option value="10">10</option>
                        <option value="15">15</option>
                    </select>
                </div>

                <button type="submit" class="pure-button pure-button-primary">Generate Shares</button>

            </fieldset>
        </form>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script>
        function checkRunning(){
            $.get('./isRunning', function(isRunning){
                console.log('is running', isRunning);
                var running = $.parseJSON(isRunning)
                if(running)
                {
                    $('h3').text('Generator status: Running');
                    $('button').attr('disabled', 'disabled');
                } else {
                    $('h3').text('Generator status: Not Running');
                    $('button').removeAttr('disabled');
                }
            });
        };

        setInterval(checkRunning, 1000);

    </script>
</body>
</html>